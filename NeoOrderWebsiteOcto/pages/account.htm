title = "Account"
url = "/account/:code?"
layout = "default"
is_hidden = 0

[session]
security = "all"

[Esroyo\UserProfile\Components\Account account2]
paramCode = "code"
forceSecure = 0

[sociallogin]
==
<?php
function onInit(){
    $user = Auth::getUser();
    if($user){
        $component = $this->addComponent('NetSTI\Uploader\Components\ImageUploader','imageUploader',
            ['modelClass'=>'RainLab\User\Models\User','modelKeyColumn'=>'avatar', 'deferredBinding' => false]);
        $component->bindModel('avatar', $user);
    }
}
?>
==
{% partial "header" %}

<!-- bloc-7 -->
<div class="bloc bgc-tangerine-yellow l-bloc bloc-bg-texture texture-diagonal-lines" id="bloc-7">
	<div class="container bloc-lg sm-padding">
		<div class="row voffset">
			<div class="col-sm-12 col-md-6 col-md-offset-3">
            <!-- content -->
            
            {% if not user %}
            


                <div class="row">


                    <div class="col-md-6">
                                <!-- panel -->
            <div class="panel panel-shadow">
					<div class="panel-heading">
						<h3 class="mg-clear">
							Sign in
						</h3>
					</div>
            
			<div class="panel-body">
			
                        {% partial account ~ '::signin' %}
                        {% component 'sociallogin' %}
                                    </div>
            </div>
            <!-- end panel -->
            
                    </div>
            
                    <div class="col-md-6">
                    
                                <!-- panel -->
            <div class="panel panel-shadow">
					<div class="panel-heading">
						<h3 class="mg-clear">
							Register
						</h3>
					</div>
					
			<div class="panel-body">                    

                        {% partial account ~ '::register' %}
                        
                        
                                                            </div>
            </div>
            <!-- end panel -->
                        
                    </div>
            
                </div>
                


            {% else %}
                    

<div class="panel">
					<div class="panel-heading">
						<h3 class="mg-clear">
							My Account
						</h3>
					</div>
					<div class="panel-body">

{% if not user %}

    <div class="row">

        <div class="col-md-6">
            <h3>{{ _('sign_in', 'rainlab.user::lang.account') }}</h3>
            {% partial __PARENT__ ~ '::signin' %}
        </div>

        <div class="col-md-6">
            <h3>{{ _('register', 'rainlab.user::lang.account') }}</h3>
            {% partial __PARENT__ ~ '::register' %}
        </div>

    </div>

{% else %}

    {% partial __PARENT__ ~ '::activation_check' %}

<style>
.form-group.required .control-label:after {
  content: "*";
  color: #c20a0a;
  padding: 0 3px;
}
</style>

{{ form_ajax('onUpdate', { model: user }) }}

    {% set account_tab = _('account', 'rainlab.user::lang.account') %}

    <ul id="user-profile-tabs" class="nav nav-tabs" data-tabs="user-profile-tabs">
        <li class="nav-item active"><a href="#{{ str_slug(account_tab) }}" data-toggle="tab" class="nav-link active">{{ account_tab }}</a></li>

        {% for tab, fields in user_profile_fields %}
            <li class="nav-item"><a href="#{{ str_slug(tab) }}" data-toggle="tab" class="nav-link">{{ tab }}</a></li>
        {% endfor %}

    </ul>

    <div id="user-profile-tab-content" class="tab-content" style="padding-top:1em">
        <div class="tab-pane active" id="{{ str_slug(account_tab) }}">
            <div class="form-group">
                <label for="accountName" class="control-label">{{ _('name', 'rainlab.user::lang.user') }}</label>
                <input name="name" type="text" class="form-control" id="accountName" value="{{ form_value('name') }}">
            </div>

            <div class="form-group">
                <label for="accountSurname" class="control-label">{{ _('surname', 'rainlab.user::lang.user') }}</label>
                <input name="surname" type="text" class="form-control" id="accountSurname" value="{{ form_value('surname') }}">
            </div>
            
            <div class="form-group">
                <label for="accountName" class="control-label">Upload Picture</label>
                {% component 'imageUploader' %}
            </div>
            

            <div class="form-group required">
                <label for="accountEmail" class="control-label">{{ _('email', 'rainlab.user::lang.user') }}</label>
                <input name="email" type="email" class="form-control" id="accountEmail" value="{{ form_value('email') }}">
            </div>

            <div class="form-group">
                <label for="accountPassword" class="control-label">{{ _('new_password', 'rainlab.user::lang.account') }}</label>
                <input name="password" type="password" class="form-control" id="accountPassword">
            </div>

            <div class="form-group">
                <label for="accountPasswordConfirm" class="control-label">{{ _('new_password_confirm', 'rainlab.user::lang.account') }}</label>
                <input name="password_confirmation" type="password" class="form-control" id="accountPasswordConfirm">
            </div>
        </div>

        {% for tab, fields in user_profile_fields %}
        <div class="tab-pane" id="{{ str_slug(tab) }}">

            {% for field in fields %}
                <div class="form-group{% if field.required %} required{% endif %}"
                    {% if field.span == 'left' %}
                        style="float:left;width:48.5%;clear:left"
                    {% elseif field.span == 'right' %}
                        style="float:right;width:48.5%;clear:right"
                    {% endif %}
                >
                    {% if field.label %}
                        <label for="{{ __PREFIX__ ~ field.name }}" class="control-label">{{ field.label }}</label>
                    {% endif %}

                    {% if field.type == 'textarea' %}
                        <textarea name="{{ field.name }}" class="form-control" id="{{ __PREFIX__ ~ field.name }}" {% if field.required %}required{% endif %} >{{ form_value(field.name) }}</textarea>
                    {% else %}
                        <input
                            name="{{ field.name }}"
                            type="{{ field.type }}"
                            class="form-control"
                            id="{{ __PREFIX__ ~ field.name }}"
                            value="{{ form_value(field.name) }}"
                            {% if field.required %}required{% endif %}
                        >
                    {% endif %}

                    {% if field.comment %}
                        <p class="help-block">{{ field.comment }}</p>
                    {% endif %}
                </div>
            {% endfor %}

        </div>
        {% endfor %}

    </div>

    <button type="submit" class="btn btn-primary pull-right">{{ _('save', 'backend::lang.form') }}</button>

{{ form_close() }}

    {% partial account2 ~ '::deactivate_link' %}

{% endif %}


					</div>
				</div>                    
                    
            
            {% endif %}
            
            <!-- end content -->
			</div>
		</div>
	</div>
</div>
<!-- bloc-7 END -->

<!-- ScrollToTop Button -->
<a class="bloc-button btn btn-d scrollToTop" onclick="scrollToTarget('1')"><span class="fa fa-chevron-up"></span></a>
<!-- ScrollToTop Button END-->
{% partial "footer" %}